{"version":3,"file":"build.js","sources":["webpack:///webpack/bootstrap 540a296ce13c4f350109","webpack:///modules/color-changer.js","webpack:///modules/company-vacancy-count.js","webpack:///modules/date-formatter.js","webpack:///modules/fetch.js","webpack:///modules/vacancy-url-formatter.js","webpack:///modules/color-disabler.js","webpack:///modules/loader-main.js","webpack:///modules/render.js","webpack:///main.js"],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 540a296ce13c4f350109","var changeColor = function(tableRow) {\n    var colRand = () => {\n            return Math.floor(Math.random() * 256);\n    };\n    var color = 'rgb' + '(' + colRand() + ' ,' + colRand()+ ' ,' + colRand() + ')';\n    return this.style.background = color;\n};\n\nmodule.exports = changeColor;\n\n\n// WEBPACK FOOTER //\n// modules/color-changer.js","const fetchApi = require('./fetch.js');\nconst companiesUrl = 'https://api.zp.ru/v1/companies/?q=';\n\nvar companyVacanciesCount = function(item) {\n    var url = companiesUrl + item.company.id;\n    var count = fetchApi(url).then((data) => {   \n        return data.companies[0].vacancies_total.active;;\n    }); \n    return count;\n};\n\nmodule.exports = companyVacanciesCount;\n\n\n// WEBPACK FOOTER //\n// modules/company-vacancy-count.js","var dateFormatter = function(add_date) {\n    var mounthArr = [\n        'Января',\n        'Февраля',\n        'Марта',\n        'Апреля',\n        'Мая',\n        'Июня',\n        'Июля',\n        'Августа',\n        'Сентября',\n        'Октября',\n        'Ноября',\n        'Декабря'\n    ];\n    var date = new Date(add_date);\n    var date_object = {\n        year: date.getFullYear(),\n        mounth: date.getMonth(),\n        day: date.getDate()\n    };\n    return date_object.day + ' ' + mounthArr[date_object.mounth] + ' '  + date_object.year;\n};\n\nmodule.exports = dateFormatter;\n\n\n// WEBPACK FOOTER //\n// modules/date-formatter.js","var fetchApi = function(url) {\n    return fetch(url)\n        .then((response) => {\n            return response.json();\n        });\n    };\nmodule.exports = fetchApi;\n\n\n// WEBPACK FOOTER //\n// modules/fetch.js","var vacancyUrlFormatter = function(item) {\n    var humanUrl = item.url.match(/\\/\\w+\\?/)[0];\n    var chpu = humanUrl.substr(0, humanUrl.length-1);\n    var vacancyUrl = \"https://www.zarplata.ru\" + '/vacancy/card/' + item.id + chpu;\n    return vacancyUrl;\n};\n\nmodule.exports = vacancyUrlFormatter;\n\n\n// WEBPACK FOOTER //\n// modules/vacancy-url-formatter.js","const changeColor = require('./color-changer.js');\n\nvar colorDisable = () => {\n    var disable = () => {\n        var item = document.getElementById('vacancy-list').children;\n        for (var i=0; i<item.length; i++ ) {\n            item[i].style.background = '#fff';\n            item[i].removeEventListener(\"click\", changeColor,false);\n        }\n    };\n    var logo = document.querySelector('a.main-logo img');\n    return logo.addEventListener('mouseover', disable);\n};\n\nmodule.exports = colorDisable; \n\n\n// WEBPACK FOOTER //\n// modules/color-disabler.js","var loader = function() {\n    var loader = document.createElement('div');\n    loader.className = \"loader\";\n    loader.id = \"loader\";\n    loader.innerHTML = '<img src=\"static/img/loader/loading_spinner.gif\">';\n    return document.body.appendChild(loader);\n};\n\n//var list = document.querySelector()\n\nmodule.exports = loader;\n\n\n// WEBPACK FOOTER //\n// modules/loader-main.js","const dateFormatter = require('./date-formatter.js');\nconst vacancyUrlFormatter = require('./vacancy-url-formatter');\nconst companyVacanciesCount =require('./company-vacancy-count.js');\nconst changeColor = require('./color-changer.js');\n\nvar createElement = function(element) {\n    return document.createElement(element);\n};\nvar appendElement = function(parent, child) {\n    return parent.appendChild(child);\n};\n\nvar table = document.getElementById('vacancy-list');\n\nvar renderItem = function(data, count) {\n        var tableRow = createElement('div');\n        tableRow.className = \"vacancy-item\";\n        tableRow.addEventListener(\"click\", changeColor, false);\n    \n        var header = createElement('div');\n        header.className = \"header\";\n\n        var logo = createElement('div');\n        logo.className = \"logo\";\n\n        logo.innerHTML = '<img alt=\"Логотип компании\" width=\"100\" src=' + data.src + '>';\n        header.innerHTML = '<a target=\"_blank\" class=\"vacancy-title\" href=\"' + data.vacancyUrl + '\">\\\n            <span>' + data.header + '</span>\\\n            </a>\\\n            <div class=\"date\"> \\\n                <span>' + 'Дата добавления: ' + data.date +'</span> \\\n                </div>';\n        if (count != undefined) {\n            var vacanciesCount = createElement('div');\n            vacanciesCount.className = \"vacancies-count\";\n            vacanciesCount.innerHTML = '<span>Количество вакансий компании: ' + count + '</span>';\n            appendElement(header, vacanciesCount);\n        };\n        appendElement(table, tableRow);\n        appendElement(tableRow, header);\n        appendElement(tableRow, logo);\n        \n};\n\nmodule.exports = renderItem;\n\n\n// WEBPACK FOOTER //\n// modules/render.js","const dateFormatter = require('./modules/date-formatter.js');\nconst vacancyUrlFormatter = require('./modules/vacancy-url-formatter');\nconst companyVacanciesCount =require('./modules/company-vacancy-count.js');\nconst fetchApi = require('./modules/fetch.js');\nconst renderItem = require('./modules/render.js');\nconst changeColor = require('./modules/color-changer.js');\nconst loader = require('./modules/loader-main.js');\nconst colorDisable = require('./modules/color-disabler.js');\n\nvar table = document.getElementById('vacancy-list');\nconst url = \"https://api.zp.ru/v1/vacancies/\";\n\ncolorDisable();\nloader();\ntable.style = 'display:none';\nfetchApi(url)\n\t.then((data) => {\n\t\tvar listItem = data.vacancies.map(function(item) {\n\t\t\tvar src;\n\t\t\titem.company.logo === null || item.company.logo.url === null ? src = \"static/icon/company-no-logo.svg\" : src = item.company.logo.url;\n\t\t\tvar vacancyUrl = vacancyUrlFormatter(item);\n\t\t\tvar date = dateFormatter(item.add_date);\n\t\t\tvar header = item.header;\n\t\t\tvar renderData = {src, vacancyUrl, date, header};\n\t\t\tif (item.company.id != null) {\n\t\t\t\tvar count = companyVacanciesCount(item);\n\t\t\t\tcount.then((vacanciesCount) => {\n\t\t\t\t\trenderItem(renderData, vacanciesCount);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\trenderItem(renderData);\n\t\t\t};\t\n\t\t\tconsole.log(listItem);\t\t\n\t\t})\n\t\t\treturn listItem;\n\t})\n\t.then((listItem) => {\n\t\tconsole.log(listItem.length);\n\t\tif (listItem.length === 25) {\n\t\t\tdocument.getElementById('loader').remove();\n\t\t\ttable.style.display = 'block';\n\t\t}\n\t});\n\n\n// WEBPACK FOOTER //\n// main.js"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACVA;AACA;AAcA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;;;;;;;;;;ACvBA;AACA;AAEA;AACA;AACA;;;;;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;;;AAAA;AAAA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;;;;;;;;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;;;","sourceRoot":""}